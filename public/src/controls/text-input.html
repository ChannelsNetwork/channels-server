<dom-module id="text-input">
  <template>
    <style is="custom-style" include="app-styles iron-flex iron-flex-alignment">
       :host {
        display: block;
        font-size: 20px;
      }

      label {
        display: block;
        font-size: 16px;
        letter-spacing: 0.05em;
        margin-bottom: 5px;
        color: var(--highlight-blue);
        opacity: 0;
        transition: opacity 0.3s ease-out;
      }

      input {
        display: block;
        width: 100%;
        box-sizing: border-box;
        background: transparent;
        outline: none;
        border: none;
        border-bottom: 1px solid #fff;
        color: inherit;
        font-family: inherit;
        font-size: inherit;
      }

      #validator {
        font-size: 10pt;
        padding-left: 5px;
      }

      .hidden {
        display: none;
      }

      .valid {
        color: #66BB6A;
      }

      .notvalid {
        color: #EF5350;
      }
    </style>
    <div class="horizontal layout center">
      <label class="flex" id="lbl">[[label]]</label>
      <div class="hidden" id="validator">[[_validation]]</div>
    </div>
    <input id="txt" type$="[[type]]" placeholder$="[[placeholder]]" on-input="_onInput">
  </template>
  <script>
    class TextInput extends Polymer.Element {
      static get is() { return "text-input"; }
      static get properties() {
        return {
          label: String,
          placeholder: String,
          type: {
            type: String,
            value: "text"
          },
          _validation: String
        }
      }

      get input() {
        return this.$.txt;
      }

      get value() {
        return this.$.txt.value;
      }

      set value(v) {
        this.$.txt.value = v;
        this._onInput();
      }

      _onInput() {
        if (this.value) {
          this.$.lbl.style.opacity = 1;
        } else {
          this.$.lbl.style.opacity = 0;
        }
      }

      validate(message, isError) {
        this._validation = message || "";
        if (message) {
          this.$.validator.classList.remove("hidden");
          if (isError) {
            this.$.validator.classList.remove("valid");
            this.$.validator.classList.add("notvalid");
          } else {
            this.$.validator.classList.add("valid");
            this.$.validator.classList.remove("notvalid");
          }
        } else {
          this.$.validator.classList.add("hidden");
        }
      }
    }
    window.customElements.define(TextInput.is, TextInput);
  </script>
</dom-module>