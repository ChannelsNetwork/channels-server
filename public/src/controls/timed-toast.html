<dom-module id="timed-toast">
  <template>
    <style>
       :host {
        position: fixed;
        bottom: 25px;
        max-width: 295px;
        opacity: 0;
        display: none;
        transition: opacity 0.2s ease;
        z-index: 99;
        right: 25px;
        border-radius: 5px;
        overflow: hidden;
        font-weight: bold;
        box-shadow: 0 0 3px rgba(0, 0, 0, 0.12), 0 3px 3px rgba(0, 0, 0, 0.24), 0 0 6px rgba(0, 0, 0, 0.12), 0 6px 6px rgba(0, 0, 0, 0.24);
      }

      #message {
        background: rgba(0, 0, 0, 0.85);
        color: white;
        padding: 15px;
      }
    </style>
    <div id="message">[[message]]</div>
  </template>
  <script>
    class TimedToast extends Polymer.Element {
      static get is() { return "timed-toast"; }
      static get properties() {
        return {
          message: String
        }
      }

      hide() {
        this._showing = false;
        this.style.opacity = 0;
        setTimeout(() => {
          this.style.display = "none";
        }, 300);
      }

      show(message) {
        this.message = message;
        this.style.display = "block";
        setTimeout(() => {
          this.style.opacity = 1;
        }, 1);
        if (this._timeout) {
          clearTimeout(this._timeout);
        }
        this._timeout = setTimeout(() => {
          this._timeout = null;
          this.hide();
        }, 3000);
      }
    }
    window.customElements.define(TimedToast.is, TimedToast);
  </script>
</dom-module>