<link rel="import" href="../../../bower_components/soso-app-header/soso-app-header.html">
<link rel="import" href="../../app/dialog-bar.html">
<link rel="import" href="card-budget-view.html">
<dom-module id="card-budget-page">
  <template>
    <style is="custom-style" include="app-styles">
      :host {
        display: block;
      }
    </style>
    <soso-app-header>
      <dialog-bar text="Card Promotion Budget" on-cancel="_onCancel"></dialog-bar>
    </soso-app-header>
    <card-budget-view data="[[card]]"></card-budget-view>
  </template>
  <script>
    class CardBudgetPage extends Polymer.Element {
      static get is() { return 'card-budget-page'; }
      static get properties() {
        return {
          card: Object
        };
      }

      onActivate(route) {
        this._showProgress(null);
        $core.register().then(() => {
          this.card = {};
        }).catch(err => {
          console.error(err);
          $app.showError(err).then(() => {
            this._onCancel();
          });
        });
      }

      _showProgress() {
      }

      _onCancel() {
      }
    }
    window.customElements.define(CardBudgetPage.is, CardBudgetPage);
  </script>
</dom-module>