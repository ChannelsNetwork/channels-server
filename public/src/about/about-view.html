<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../controls/user-image.html">

<dom-module id="about-view">
  <template>
    <style is="custom-style" include="app-styles">
      :host {
        display: block;
      }

      .content {
        padding: 50px 16px;
        max-width: 600px;
        margin: 0 auto;
        position: relative;
      }

      .center {
        text-align: center;
      }

      .count {
        margin: 50px 0;
      }

      .countPanel {
        line-height: 1.2;
        padding: 20px;
        text-align: center;
      }

      .countValue {
        font-size: 70px;
      }

      .countLabel {
        text-transform: uppercase;
        font-size: 14px;
      }

      section {
        border-bottom: 1px solid #e5e5e5;
      }

      section:nth-child(even) {
        background: #f5f5f5;
      }

      a,
      a:visited,
      a:hover {
        color: var(--dark-green);
        letter-spacing: initial;
      }

      .person {
        display: inline-block;
        text-align: center;
        padding: 5px;
        vertical-align: top;
        font-size: 10pt;
        letter-spacing: 0.05em;
      }

      user-image {
        width: 120px;
        height: 120px;
        margin-bottom: 10px;
      }

      .lastUpdated {
        font-size: 14px;
        margin: 10px 0;
        color: #555;
        letter-spacing: 0.05em;
      }

      @media (max-width: 600px) {
        .count {
          margin-top: 30px;
        }
        .countLabel {
          font-size: 12px;
        }
        .countValue {
          font-size: 40px;
        }
        .countPanel {
          padding: 10px;
        }
        user-image {
          width: 70px;
          height: 70px;
        }
      }
    </style>
    <section>
      <div class="content center">
        <h2>We're holding a spot for you!</h2>
        <h2>Channels will officially launch in</h2>
        <div class="count horizontal layout center-center">
          <div class="countPanel">
            <div class="countValue">[[days]]</div>
            <div class="countLabel">days</div>
          </div>
          <div class="countPanel">
            <div class="countValue">[[hours]]</div>
            <div class="countLabel">Hours</div>
          </div>
          <div class="countPanel">
            <div class="countValue">[[minutes]]</div>
            <div class="countLabel">Minutes</div>
          </div>
          <div class="countPanel">
            <div class="countValue">[[seconds]]</div>
            <div class="countLabel">Seconds</div>
          </div>
        </div>
      </div>
    </section>
    <section>
      <div class="content">
        <h1>About Us</h1>
        <p>
          <a href="/">Channels</a> is built and operated by Hivepoint, Inc. We're located in Palo Alto, California.
        </p>
        <div class="horizontal layout">
          <div class="person flex">
            <user-image image="/s/images/team/kingston.jpg"></user-image>
            <div>Kingston Duffie</div>
          </div>
          <div class="person flex">
            <user-image image="/s/images/team/carl.jpg"></user-image>
            <div>Carl Hubbard</div>
          </div>
          <div class="person flex">
            <user-image image="/s/images/team/preet.jpg"></user-image>
            <div>Preet Shihn</div>
          </div>
        </div>
      </div>
    </section>
    <section>
      <div class="content">
        <h1>About Channels</h1>
        <p>This is the world's first hybrid content/attention market. Everyone is free to post content.</p>
        <p>
          <b>Publishers</b> sell content, earning revenue from those who view their work. We want those who create great content
          to be well paid.
        </p>
        <p>
          <b>Advertisers</b> purchase "attention" from the consumers that interest them. We want advertisers to compete with
          each other on a level playing field based on the price they will pay consumers, and on the quality of their ad
          content.
        </p>
        <p>
          <b>Consumers</b> buy the content they want, and sell their attention, but only if they choose to.
        </p>
        <p>
          <a href="/">Channels</a> is being launched in late 2017.</p>
      </div>
    </section>
    <section>
      <div class="content">
        <h1>Contact Us</h1>
        <p>The best way to reach us is at
          <a href="https://twitter.com/channelscc" target="_blank">@channelscc</a> on Twitter. If you have a question or comment, send us a tweet and we'll respond promptly.</p>
        <p>If you prefer email, you can reach us at
          <a href="mailto:support@channels.cc">support@channels.cc</a>.</p>
      </div>
    </section>
    <section>
      <div class="content">
        <h1>Terms of Service</h1>
        <div class="lastUpdated">Last updated: 11/3/2017</div>
        <p>Our terms of service are not yet fully defined.
          <b>Proceed with caution.</b>
        </p>
        <p>By using Channels, you agree to do so at your own risk and agree not to hold us liable for any direct or indirect
          loss you may incur or damage you may suffer.</p>
        <p>All references to currency and any balance you hold is for demonstration purposes only. We may or may not assign
          value to your balance at a future date at our discretion.</p>
        <p>We will not share any information you provide us with any third party other than as part of this service itself.</p>
      </div>
    </section>
  </template>
  <script>
    class AboutView extends Polymer.Element {
      static get is() { return 'about-view'; }
      static get properties() {
        return {
          days: Number,
          hours: Number,
          minutes: Number,
          seconds: Number,
          status: Object
        };
      }

      onActivate() {
        this._active = true;
        if (!$core.hasKey) {
          setTimeout(() => {
            $router.goto("");
          }, 600);
        } else {
          this.style.opacity = 0;
          $core.register().then((info) => {
            this.style.opacity = 1;
            this.status = info.status;
            this._refresh();
          }).catch((err) => {
            console.error(err);
            setTimeout(() => {
              $router.goto("");
            }, 600);
          });
        }
      }

      onDeactivate() {
        this._active = false;
      }

      _refresh() {
        if (!this.status) {
          return;
        }
        var diff = (this.status.goLive - (new Date()).getTime()) / 1000;
        this.days = Math.floor(diff / (3600 * 24));
        this.hours = Math.floor(diff / 3600 % 24);
        this.minutes = Math.floor(diff / 60 % 60);
        this.seconds = Math.round(diff % 60);

        this._step();
      }

      _step() {
        if (this._active) {
          setTimeout(() => {
            if (this._active) {
              this._refresh();
            }
          }, 1000);
        }
      }
    }
    window.customElements.define(AboutView.is, AboutView);
  </script>
</dom-module>